<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    *{
        margin: 0;
        padding: 0;
        list-style: none;
    }
    h1{
        text-align: center;
        font-size: 40px;
    }
    table {width: 100%;
        border: 1px solid #000;
        margin: auto;
    }
    th{
        cursor: default;
        background-color: #000;
        color: #ddd;
    }
    th:hover{
        cursor: default;
        background-color:#ddd ;
        color: #000;
    }

    tr:nth-child(even) {
        background-color: #000;
        color: #ddd;
    }
    tr:nth-child(odd) {
        background-color: #444;
        color: #ddd;

    }

    tr,
    th,
    td {
        padding: 0;
        border: 1px solid #000;
        font-size: 30px;
    }

    img {
        width: 100px;
    }
</style>

<body>

    <h1>Apple iPad</h1>


    <!-- <div id="msg"></div> -->


    <script>
        // console.log(Object.keys(employees[0]))
        // console.log(Object.values(employees[0]))
        // let ipad_expensive=ipads.filter(item=>item.price>15000)
        var ipad = "";
        window.onload = function () {

            let xhr = new XMLHttpRequest;
            xhr.onload = function () {
                // document.getElementById("msg").innerHTML = this.responseText;
                ipad = JSON.parse(this.responseText);
                addthead();
                addbody();
                // var th_sku = document.getElementsByTagName("th")[1]
                // var th_price = document.getElementsByTagName("th")[2]
                // th_sku.onclick = thsort;
                // th_price.onclick = priceonclick;
                var the= document.getElementsByTagName("th")
                console.log(the)
                for (let item of the) {
                    // th[i].attachEvent("onclick",_clicki);
                    item.onclick = function() {
                        // alert(1111);
                        _thsort(item);
                    }
                }
            }
            xhr.open("GET", "http://127.0.0.1:5501/AjaxExamplesLite/Examples/Apple/iPad.json");
            xhr.send();
        }
        function _thsort(btn){
            // alert(1111);
            var type = btn.innerHTML;
            var tbody = document.getElementsByTagName('tbody')[0];
            tbody.remove(true);
            ipad = ipad.sort(function (a, b) {
                return a[type] > b[type] ? 1 : -1;
            });
            addbody();
        }

        // function skuonclick(btn) {
        //     var type = btn.id
        //     var tbody = document.getElementsByTagName('tbody')[0];
        //     tbody.remove(true);
        //     ipad = ipad.sort(function (a, b) {
        //         return a[type] > b[type] ? 1 : -1;
        //     });
        //     addbody();
        // }


        function priceonclick() {
            var tbody = document.getElementsByTagName('tbody')[0];
            tbody.remove(true);
            let xhr = new XMLHttpRequest;
            xhr.onload = function () {
                ipad = JSON.parse(this.responseText);
                console.log(ipad)
                pricesortup();
                addbody();
            }
            xhr.open("GET", "http://127.0.0.1:5500/HTML/iPad.json");
            xhr.send();
        }

        function pricesortup() {
            ipad = ipad.sort(function (a, b) {
                return a.price > b.price ? 1 : -1;
            });
        }



        function addthead() {

            var table = document.createElement('table');
            document.body.appendChild(table);
            var thead = document.createElement('thead');
            table.appendChild(thead);
            for (var prop in ipad[0]) {
                var th = document.createElement('th');
                thead.appendChild(th);
                th.innerHTML = prop;
            }

        }

        function addbody() {
            let table = document.getElementsByTagName('table')[0];
            var tbody = document.createElement('tbody');
            table.appendChild(tbody);

            for (let i = 0; i < ipad.length; i++) {
                var tr = document.createElement('tr');
                tbody.appendChild(tr);
                for (let prop in ipad[i]) {
                    var td = document.createElement('td');
                    tr.appendChild(td);
                    td.innerHTML = ipad[i][prop];
                }

            }
        }
    </script>

</body>

</html>

